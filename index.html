<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>1v1 MOBA – Online + ML‑Style Controls (Pro)</title>
  <style>
    :root { --bg:#0b0f14; --fg:#e7f0ff; --panel:rgba(0,0,0,.45); --btn:#111827; --btnb:#374151; }
    html, body { margin:0; height:100%; background:var(--bg); color:var(--fg); font-family:system-ui, Arial; overscroll-behavior:none }
    #topbar { position:fixed; left:10px; top:10px; z-index:10; background:var(--panel); padding:8px 12px; border-radius:10px; font-size:14px }
    #status { position:fixed; right:10px; top:10px; z-index:10; background:var(--panel); padding:8px 12px; border-radius:10px; font-size:13px }
    #win { position:fixed; left:50%; top:50%; transform:translate(-50%,-50%); font-size:42px; font-weight:800; display:none; z-index:9 }
    #ui { position:fixed; left:50%; transform:translateX(-50%); bottom:10px; display:flex; gap:8px; z-index:10; flex-wrap:wrap; justify-content:center }
    .btn { background:var(--btn); border:1px solid var(--btnb); color:#e5e7eb; padding:8px 10px; border-radius:8px; font-size:13px; cursor:pointer }
    #canvas { display:block; width:100vw; height:100vh; touch-action:none }
    /* ML-style controls */
    #mobile { position:fixed; left:0; bottom:0; width:100%; height:100%; pointer-events:none; z-index:8 }
    .stick { position:absolute; left:20px; bottom:20px; width:150px; height:150px; border-radius:50%; background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.15); pointer-events:auto }
    .knob { position:absolute; left:50%; top:50%; width:72px; height:72px; transform:translate(-50%,-50%); border-radius:50%; background:rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.25) }
    .skillpad { position:absolute; right:24px; bottom:24px; display:flex; gap:14px; pointer-events:auto; align-items:flex-end }
    .cluster { display:flex; flex-direction:column; gap:14px }
    .skill { position:relative; width:84px; height:84px; border-radius:18px; background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.2); display:flex; align-items:center; justify-content:center; font-weight:800; font-size:18px; user-select:none; -webkit-user-select:none; }
    .skill .cd { position:absolute; bottom:6px; right:8px; font-size:12px; opacity:.9 }
    .skill.locked { filter:grayscale(1) brightness(0.7) }
    .aimLine { position:absolute; pointer-events:none; border-top:2px solid rgba(234,179,8,.85); transform-origin:left center; display:none }
    .lock { width:58px; height:58px; border-radius:14px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.2); display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:700 }
    .lock.on { outline:2px solid #22c55e; }
    /* Minimap */
    #minimap { position:fixed; left:12px; top:70px; width:180px; height:108px; background:rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.15); border-radius:10px; z-index:10 }
  </style>
</head>
<body>
  <div id="topbar">
    <b>1v1 MOBA – Online</b><br/>
    ML‑style: left joystick + right skill pad (Attack, Q, E). Drag on a skill to aim, release to cast. Toggle LOCK for auto-aim.
  </div>
  <div id="status">Offline</div>
  <div id="win"></div>
  <div id="ui">
    <button class="btn" id="btnHost">Host</button>
    <input class="btn" id="room" placeholder="room-code" style="width:120px; text-transform:lowercase" />
    <button class="btn" id="btnJoin">Join</button>
    <button class="btn" id="btnLocal">Local</button>
    <button class="btn" id="btnReset">Reset</button>
    <button class="btn" id="btnWave">Wave</button>
  </div>
  <canvas id="canvas"></canvas>
  <canvas id="minimap"></canvas>

  <!-- ML-style mobile controls -->
  <div id="mobile">
    <div id="stick" class="stick">
      <div id="knob" class="knob"></div>
    </div>
    <div class="skillpad">
      <div class="cluster">
        <div id="btnAttack" class="skill">A <span class="cd" id="cdA"></span></div>
      </div>
      <div class="cluster">
        <div id="btnQ" class="skill">Q <span class="cd" id="cdQ"></span></div>
        <div id="btnE" class="skill">E <span class="cd" id="cdE"></span></div>
      </div>
      <div class="cluster">
        <div id="btnLock" class="lock">LOCK</div>
      </div>
    </div>
    <div id="aimLine" class="aimLine"></div>
  </div>

  <script src="./net.js" type="module"></script>
  <script src="./ui.js" type="module"></script>
  <script src="./app.js" type="module"></script>
</body>
</html>
